<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>VSS Application</title>
    <base href="/" />

    <!--ABP:Styles-->
    <link href="global.css" rel="stylesheet" />
    <link href="main.css" rel="stylesheet" />
    <!--/ABP:Styles-->

    <link href="web_backend.Blazor.Client.styles.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="css/vss.css" rel="stylesheet" />

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="js/hlsPlayer.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/logouthelper.js"></script>
</head>
<body class="abp-application-layout bg-light">
    <div id="app">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    </div>

    <!-- Add Bootstrap bundle with Popper.js which is required for dropdowns -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>

    <!--ABP:Scripts-->
    <script src="global.js"></script>
    <!--/ABP:Scripts-->
</body>
</html>

<script>
    window.configureForOBS = function () {
        // Ensure transparent background
        document.body.style.background = 'transparent';
        document.documentElement.style.background = 'transparent';

        // Remove any unwanted elements
        document.querySelectorAll('.abp-application-layout, .navbar, .footer, .sidebar, .header, .notification-area, .admin-controls, .admin-panel')
            .forEach(el => {
                el.style.display = 'none';
            });

        // Set OBS-friendly CSS variables
        document.documentElement.style.setProperty('--background-color', 'transparent');

        // Add a special class to body
        document.body.classList.add('obs-mode');

        // Ensure visible elements are properly sized
        const overlay = document.querySelector('.obs-overlay');
        if (overlay) {
            overlay.style.position = 'absolute';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100%';
            overlay.style.height = '100%';
        }

        console.log("OBS configuration applied");
    };

    window.notifyScoreboardLoaded = function () {
        console.log("Scoreboard loaded successfully");

        // Create a custom event
        const event = new CustomEvent('scoreboardLoaded');
        window.dispatchEvent(event);

        // Fix team logo sizes
        document.querySelectorAll('.team-logo img').forEach(img => {
            img.style.width = '100%';
            img.style.height = '100%';
            img.style.objectFit = 'contain';
            img.style.maxWidth = '32px';
            img.style.maxHeight = '32px';
        });
    };
</script>
